# üé® Frontend - Primordial Duck Operation

Interface web moderna constru√≠da com **React 19** e **Vite 7** para gerenciamento completo do sistema de cataloga√ß√£o e captura de Patos Primordiais.

---

## üèóÔ∏è Arquitetura do Frontend

### **Component-Based Architecture**

O projeto segue os princ√≠pios de arquitetura baseada em componentes com separa√ß√£o clara de responsabilidades:

```
src/
‚îú‚îÄ‚îÄ components/          # üß© Componentes Reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ Layout.jsx      # Layout principal com navega√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ FilterPanel.jsx # Painel de filtros gen√©rico
‚îÇ   ‚îî‚îÄ‚îÄ Pagination.jsx  # Componente de pagina√ß√£o
‚îú‚îÄ‚îÄ pages/              # üìÑ P√°ginas da Aplica√ß√£o
‚îú‚îÄ‚îÄ contexts/           # üîÑ Gerenciamento de Estado Global
‚îú‚îÄ‚îÄ services/           # üåê Camada de Servi√ßos
‚îú‚îÄ‚îÄ App.jsx             # üö¶ Configura√ß√£o de Rotas
‚îî‚îÄ‚îÄ main.jsx           # üöÄ Entry Point
```

---

## üìÅ Estrutura Detalhada

### **Components** - Componentes Reutiliz√°veis

#### **Layout.jsx**
- Estrutura base da aplica√ß√£o
- Navega√ß√£o principal
- Menu lateral com links
- Header com informa√ß√µes do usu√°rio
- Footer
- Responsivo (mobile-first)

**Caracter√≠sticas**:
- ‚úÖ Exibe/esconde menu em mobile
- ‚úÖ Logout integrado
- ‚úÖ Informa√ß√µes do usu√°rio logado
- ‚úÖ Navega√ß√£o condicional (rotas protegidas)

#### **FilterPanel.jsx**
- Painel de filtros gen√©rico
- Campos configur√°veis dinamicamente
- Bot√µes de aplicar e limpar

**Props aceitas**:
```jsx
<FilterPanel
  filters={[
    { name: 'search', type: 'text', placeholder: 'Buscar...' },
    { name: 'type', type: 'select', options: [...] }
  ]}
  values={filterValues}
  onChange={handleFilterChange}
  onApply={handleApplyFilters}
  onClear={handleClearFilters}
/>
```

#### **Pagination.jsx**
- Pagina√ß√£o completa
- Exibi√ß√£o de informa√ß√µes (Total de X itens)
- Bot√µes Anterior/Pr√≥ximo
- Seletor de quantidade por p√°gina

**Props**:
```jsx
<Pagination
  currentPage={1}
  totalPages={10}
  pageSize={10}
  totalItems={100}
  onPageChange={setPage}
  onPageSizeChange={setPageSize}
/>
```

---

### **Pages** - P√°ginas da Aplica√ß√£o

#### **Autentica√ß√£o**:
- `LoginPage.jsx` - Tela de login com JWT
- `RegisterPage.jsx` - Registro de novos usu√°rios
- `ForgotPasswordPage.jsx` - Reset de senha via email
- `SettingsPage.jsx` - Altera√ß√£o de senha e perfil

#### **Cataloga√ß√£o** (1¬™ Miss√£o):
- `DronesPage.jsx` - CRUD de drones (Identifica√ß√£o + Combate)
- `SuperPowersPage.jsx` - CRUD de super poderes
- `PrimordialDucksPage.jsx` - CRUD de patos primordiais

**Funcionalidades Comuns**:
- ‚úÖ Listagem com filtros
- ‚úÖ Pagina√ß√£o
- ‚úÖ Cria√ß√£o/Edi√ß√£o via modal
- ‚úÖ Exclus√£o com confirma√ß√£o
- ‚úÖ Valida√ß√£o de formul√°rios
- ‚úÖ Feedback visual (toasts)

#### **An√°lise** (2¬™ Miss√£o):
- `CaptureAnalysisPage.jsx` - Visualiza√ß√£o de m√©tricas de captura
  - 4 m√©tricas principais (Custo, Poder Militar, Risco, Cient√≠fico)
  - Score geral e classifica√ß√£o de prioridade
  - Gr√°ficos e indicadores visuais
  
- `CaptureLogicPage.jsx` - Documenta√ß√£o da l√≥gica de captura
  - Explica√ß√£o detalhada de cada m√©trica
  - F√≥rmulas de c√°lculo
  - Estrat√©gias e defesas

#### **Opera√ß√£o** (3¬™ Miss√£o):
- `CaptureOperationPage.jsx` - CRUD de opera√ß√µes de captura
  - Cria√ß√£o de opera√ß√µes
  - Sele√ß√£o de drone e pato
  - Estrat√©gia e defesa geradas automaticamente
  - Taxa de sucesso calculada
  - Status da opera√ß√£o (Preparando, Em Andamento, Sucesso, Falha)

#### **Dashboard**:
- `DashboardPage.jsx` - Vis√£o geral do sistema
  - Estat√≠sticas gerais
  - Resumo de dados
  - Acesso r√°pido √†s funcionalidades

---

### **Contexts** - Gerenciamento de Estado

#### **AuthContext.jsx**
- Gerenciamento global de autentica√ß√£o
- Armazenamento de token JWT no localStorage
- Informa√ß√µes do usu√°rio logado
- Fun√ß√µes de login/logout
- Verifica√ß√£o de autentica√ß√£o

**Uso**:
```jsx
import { useAuth } from './contexts/AuthContext';

function Component() {
  const { user, login, logout, isAuthenticated } = useAuth();
  
  // ...
}
```

**Estado gerenciado**:
- `user` - Dados do usu√°rio (id, email, role)
- `token` - JWT token
- `isAuthenticated` - Boolean
- `login(email, password)` - Fun√ß√£o de login
- `logout()` - Fun√ß√£o de logout

---

### **Services** - Camada de Servi√ßos

#### **api.js**
- Configura√ß√£o do Axios
- Interceptors para token JWT
- Base URL configur√°vel via .env
- Tratamento de erros HTTP

**Configura√ß√£o**:
```javascript
const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL,
  headers: {
    'Content-Type': 'application/json'
  }
});

// Interceptor para adicionar token
api.interceptors.request.use(config => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});
```

#### **authService.js**
- `login(email, password)` - Login de usu√°rio
- `register(userData)` - Registro de novo usu√°rio
- `forgotPassword(email)` - Solicita reset de senha
- `changePassword(oldPassword, newPassword)` - Altera senha

#### **droneService.js**
- `getDrones(filters, page, pageSize)` - Lista drones
- `getDroneById(id)` - Busca por ID
- `createDrone(data)` - Cria novo drone
- `updateDrone(id, data)` - Atualiza drone
- `deleteDrone(id)` - Remove drone

#### **primordialDuckService.js**
- CRUD completo de patos primordiais
- Filtros por hiberna√ß√£o, muta√ß√µes, etc.

#### **superPowerService.js**
- CRUD completo de super poderes
- Filtros por classifica√ß√£o

#### **captureOperationService.js**
- CRUD completo de opera√ß√µes
- An√°lise de captura integrada

#### **emailService.js**
- Integra√ß√£o com EmailJS
- Envio de emails de reset de senha

**Configura√ß√£o EmailJS**:
```javascript
emailjs.send(
  import.meta.env.VITE_EMAILJS_SERVICE_ID,
  import.meta.env.VITE_EMAILJS_TEMPLATE_ID,
  templateParams,
  import.meta.env.VITE_EMAILJS_PUBLIC_KEY
);
```

---

## üé® Padr√µes de Design

### **Hooks Customizados**
- `useAuth()` - Hook de autentica√ß√£o
- `usePagination()` - Hook de pagina√ß√£o
- `useFilters()` - Hook de filtros

### **Componentiza√ß√£o**
- Componentes pequenos e focados
- Props tipadas via PropTypes (ou TypeScript no futuro)
- Reutiliza√ß√£o m√°xima

### **Estado Local vs Global**
- **Global**: Autentica√ß√£o (Context API)
- **Local**: Estado de formul√°rios, filtros, pagina√ß√£o (useState)

### **Separa√ß√£o de Responsabilidades**
- **Pages**: L√≥gica de apresenta√ß√£o
- **Components**: UI reutiliz√°vel
- **Services**: Comunica√ß√£o com API
- **Contexts**: Estado global

---

## üöÄ Como Executar

### **Op√ß√£o 1: Docker (Recomendado)**

```bash
# Na raiz do projeto
docker-compose up -d

# Frontend estar√° em: http://localhost:3000
```

---

### **Op√ß√£o 2: Desenvolvimento Local**

#### **Pr√©-requisitos**:
- Node.js 18+ ([Download](https://nodejs.org/))
- npm ou yarn

#### **Passos**:

```bash
# 1. Navegue at√© a pasta do frontend
cd frontend/primordial-duck-frontend

# 2. Instale as depend√™ncias
npm install
# ou
yarn install

# 3. Configure as vari√°veis de ambiente
# Crie o arquivo .env.development na raiz do projeto frontend:

VITE_API_URL=http://localhost:7000/api
VITE_EMAILJS_SERVICE_ID=seu_service_id
VITE_EMAILJS_TEMPLATE_ID=seu_template_id
VITE_EMAILJS_PUBLIC_KEY=sua_public_key

# 4. Execute em modo desenvolvimento
npm run dev
# ou
yarn dev

# Frontend estar√° dispon√≠vel em: http://localhost:5173
```

---

### **Build de Produ√ß√£o**

```bash
# 1. Build da aplica√ß√£o
npm run build
# ou
yarn build

# Arquivos de produ√ß√£o estar√£o em: dist/

# 2. Preview do build localmente
npm run preview
# ou
yarn preview

# Preview estar√° em: http://localhost:4173
```

---

## üîß Configura√ß√£o de Ambiente

### **Vari√°veis de Ambiente**

Crie os arquivos `.env.development` e `.env.production`:

```env
# URL da API backend
VITE_API_URL=http://localhost:7000/api

# Credenciais EmailJS
VITE_EMAILJS_SERVICE_ID=service_xxxxxxx
VITE_EMAILJS_TEMPLATE_ID=template_xxxxxxx
VITE_EMAILJS_PUBLIC_KEY=xxxxxxxxxxxx
```

**Nota**: Vari√°veis devem come√ßar com `VITE_` para serem expostas no build do Vite.

---

## üì¶ Scripts Dispon√≠veis

```bash
# Desenvolvimento com hot reload
npm run dev

# Build de produ√ß√£o
npm run build

# Preview do build de produ√ß√£o
npm run preview

# Linting (ESLint)
npm run lint

# Formata√ß√£o de c√≥digo (Prettier)
npm run format
```

---

## üé® Estiliza√ß√£o

### **CSS Modules**
- Cada componente/p√°gina tem seu pr√≥prio arquivo CSS
- Escopo isolado (sem conflitos de classe)
- Nomenclatura BEM (Block Element Modifier)

**Exemplo**:
```jsx
// DronesPage.jsx
import styles from './DronesPage.css';

<div className={styles.container}>
  <h1 className={styles.title}>Drones</h1>
</div>
```

```css
/* DronesPage.css */
.container {
  padding: 20px;
}

.title {
  font-size: 24px;
  color: #333;
}
```

### **Vari√°veis CSS Globais**
- Definidas em `index.css`
- Cores, fontes, espa√ßamentos padronizados
- Tema consistente em toda aplica√ß√£o

---

## üåê Integra√ß√£o com Backend

### **Autentica√ß√£o JWT**
1. Login retorna token JWT
2. Token armazenado no localStorage
3. Token enviado em todas as requisi√ß√µes (header Authorization)
4. Logout remove token do localStorage

### **Tratamento de Erros**
- Interceptor Axios captura erros HTTP
- Redirecionamento autom√°tico em caso de 401 (n√£o autenticado)
- Mensagens de erro exibidas via toast

### **Pagina√ß√£o**
- Query parameters: `?page=1&pageSize=10`
- Resposta: `{ items: [...], totalCount: 100 }`

### **Filtros**
- Query parameters din√¢micos: `?search=termo&type=Identification`

---

## üìä Tecnologias e Bibliotecas

### **Core**
- **React 19.1.1** - Biblioteca UI
- **Vite 7.1.7** - Build tool e dev server

### **Roteamento**
- **React Router 7.9.4** - Roteamento SPA

### **HTTP Client**
- **Axios 1.7.9** - Requisi√ß√µes HTTP

### **Email**
- **EmailJS 4.4.1** - Envio de emails

### **√çcones**
- **Lucide React 0.468.0** - √çcones modernos

### **Estiliza√ß√£o**
- CSS puro (sem framework)
- CSS Modules para escopo isolado

---

## üéØ Boas Pr√°ticas Implementadas

- ‚úÖ **Component-Based Architecture** - Componentes reutiliz√°veis
- ‚úÖ **Context API** - Gerenciamento de estado global
- ‚úÖ **Service Layer** - Separa√ß√£o de l√≥gica de API
- ‚úÖ **Environment Variables** - Configura√ß√£o externa
- ‚úÖ **Error Handling** - Tratamento robusto de erros
- ‚úÖ **Loading States** - Feedback visual de carregamento
- ‚úÖ **Form Validation** - Valida√ß√£o client-side
- ‚úÖ **Responsive Design** - Mobile-first approach
- ‚úÖ **Code Splitting** - Lazy loading de rotas (futuro)
- ‚úÖ **Security** - XSS protection, token em header

---

## üîê Seguran√ßa

### **Prote√ß√£o XSS**
- React escapa automaticamente strings
- Evita `dangerouslySetInnerHTML`

### **Token JWT**
- Armazenado no localStorage (alternativa: httpOnly cookies)
- Enviado apenas via header Authorization
- N√£o exposto em URLs

### **CORS**
- Backend configurado para aceitar origem do frontend

---

## üì± Responsividade

- **Mobile First**: Design pensado primeiro para mobile
- **Breakpoints**:
  - Mobile: < 768px
  - Tablet: 768px - 1024px
  - Desktop: > 1024px
- **Menu adaptativo**: Hamburguer em mobile, sidebar em desktop

---

## üöÄ Deploy

### **Nginx (Produ√ß√£o)**
- Arquivo `nginx.conf` inclu√≠do
- Suporte a SPA (fallback para index.html)
- Compress√£o gzip habilitada
- Cache de assets est√°ticos

### **Vari√°veis de Ambiente**
- Build args no Dockerfile
- `.env.production` para produ√ß√£o

---

## üìö Estrutura de Rotas

```
/                           - Dashboard (protegido)
/login                      - Login
/register                   - Registro
/forgot-password            - Esqueci minha senha
/settings                   - Configura√ß√µes (protegido)

/drones                     - Lista de drones (protegido)
/super-powers               - Lista de super poderes (protegido)
/primordial-ducks           - Lista de patos (protegido)

/capture-analysis           - An√°lise de captura (protegido)
/capture-logic              - Documenta√ß√£o da l√≥gica (protegido)
/capture-operations         - Opera√ß√µes de captura (protegido)
```

**Rotas Protegidas**: Requerem autentica√ß√£o JWT. Redirecionam para /login se n√£o autenticado.

---

## üß™ Testes (Futuro)

```bash
# Testes unit√°rios com Vitest
npm run test

# Testes E2E com Playwright
npm run test:e2e

# Cobertura
npm run test:coverage
```

---

## üìö Refer√™ncias

- [React Documentation](https://react.dev/)
- [Vite Documentation](https://vitejs.dev/)
- [React Router Documentation](https://reactrouter.com/)
- [Axios Documentation](https://axios-http.com/)
- [EmailJS Documentation](https://www.emailjs.com/docs/)

---

**Desenvolvido para o Dsin Coder Challenge 2025** ü¶Ü